# Build variant to generate tasks for evergreen versions.
#
# Updates to this file may also need to appear in etc/system_perf_yml_components/variants/task_generation.yml,
# which is the same but excludes resmoke task generation tasks.
#

variables:
  # THIS HAS COPIES IN:
  # - etc/evergreen_yml_components/variants/amazon/test_dev.yml
  # - etc/evergreen_yml_components/variants/misc/task_generation.yml
  # ANY MODIFICATIONS HERE SHOULD ALSO BE MADE IN THOSE FILES
  - paths: &mongo_path_filtering
      - "*"
      - "!/monguard/**"

buildvariants:
  - name: generate-tasks-for-version
    display_name: "! Generate tasks for evergreen version"
    tags: ["required"]
    activate: true
    paths: *mongo_path_filtering
    run_on:
      - rhel8.8-medium
    modules:
      - mothra
    tasks:
      - name: version_gen
      - name: version_burn_in_gen
      - name: version_expansions_gen
      - name: bazel_result_tasks_gen
